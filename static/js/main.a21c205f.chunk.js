(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{48:function(e,t,a){e.exports=a(89)},88:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(30),c=a.n(i),s=a(6),l=a(7),o=a(9),u=a(8),d=a(10),m=a(23),p=a(18),h=a(31),v=a.n(h);v.a.initializeApp({apiKey:"AIzaSyBFbRHsN8qQisC9Cl07JkfhD7Vf-sIqSRU",authDomain:"musiclist-69653.firebaseapp.com",databaseURL:"https://musiclist-69653.firebaseio.com",projectId:"musiclist-69653",storageBucket:"",messagingSenderId:"349933260810",appId:"1:349933260810:web:f92f2719356085c2"});var g=v.a,k=a(22),f=a(17),b=a(5);var E=function(e){return r.a.createElement("nav",null,r.a.createElement("ul",{className:"linkList wrapper"},r.a.createElement("li",{className:"link "},e.user?r.a.createElement("button",{className:"logLink",onClick:e.handleLogOut},r.a.createElement(b.a,{icon:"sign-out-alt",className:"navIcon"}),r.a.createElement("p",null,"Log Out")):r.a.createElement("button",{className:"logLink",onClick:e.handleLogIn},r.a.createElement(b.a,{icon:"sign-in-alt",className:"navIcon"}),r.a.createElement("p",null,"Log In"))),r.a.createElement("li",{className:"link"},r.a.createElement(m.b,{to:"/",className:"navLink"},r.a.createElement(b.a,{icon:"search",className:"navIcon"}),r.a.createElement("p",null,"Search"))),r.a.createElement("li",{className:"link"},r.a.createElement(m.b,{to:"/songList",className:"navLink"},r.a.createElement(b.a,{icon:"clipboard-list",className:"navIcon"}),r.a.createElement("p",null,"Song List")))))},y="https://orion.apiseeds.com/api/music/lyric/",I="NwvEEhvTSAjQ5YEndl9ylxZ6OH90YtNtcDsrMWU3vShjz1dsY948lmjdvlbAQv8h",S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(){var e=g.database().ref("/".concat(a.state.userId)),t=a.props.track,n=t.trackViewUrl,r=t.collectionViewUrl,i=t.artworkUrl100,c=t.collectionCensoredName,s=t.previewUrl,l=t.artistName,o=t.trackName,u=t.trackId;e.push({trackViewUrl:n,collectionViewUrl:r,artworkUrl100:i,collectionCensoredName:c,previewUrl:s,artistName:l,trackName:o,trackId:u}),a.setState({isSaved:!0,ariaLabel:"song already saved in the list"})},a.checkSavedSongs=function(){var e=g.database().ref("/".concat(a.state.userId)),t=[];e.on("value",function(e){var n=e.val();for(var r in n)t.push(n[r].trackId);t.length&&t.includes(a.props.trackId)?a.setState({isSaved:!0,ariaLabel:"song already saved in the list"}):a.setState({isSaved:!1,ariaLabel:"save the song in the list"})})},a.state={isSaved:!1,ariaLabel:"save the song in the list",userId:a.props.user.uid},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.checkSavedSongs()}},{key:"componentDidUpdate",value:function(e,t){e.trackId!==this.props.trackId&&this.checkSavedSongs()}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"saveTrack smallButton",disabled:this.state.isSaved,"aria-label":this.state.ariaLabel,onClick:this.handleClick,title:this.state.ariaLabel},r.a.createElement(b.a,{icon:"save"})))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).singleTrack=function(){var e=a.props,t=e.track,n=e.trackId,i=e.i,c=e.handleClickOnSong,s=e.demoClick,l=e.isPlaying,o=e.previewIndex,u=t.trackViewUrl,d=t.collectionViewUrl,m=t.artworkUrl100,p=t.collectionCensoredName,h=t.previewUrl,v=t.artistName,g=t.trackName;return r.a.createElement("div",{key:i,className:"singleTrack"},r.a.createElement("div",{className:"imgWrapper"},void 0!==u?r.a.createElement("a",{tabIndex:6+3*i+1,target:"_blank",rel:"noopener noreferrer",href:u,"aira-label":"go to track's Itunes page"},r.a.createElement("img",{src:m,alt:"picture of the album "+p})):r.a.createElement("a",{tabIndex:6+3*i+1,target:"_blank",rel:"noopener noreferrer",href:d,"aira-label":"go to track's Itunes page"},r.a.createElement("img",{src:m,alt:"picture of the album "+p}))),r.a.createElement("div",{className:"trackInfo"},r.a.createElement("audio",{id:"audio".concat(i),src:h,type:"audio/m4a"}),r.a.createElement("p",{tabIndex:6+3*i+2},v),r.a.createElement("p",{tabIndex:6+3*i+3,className:"trackName","data-artist":v,"data-track":g,onClick:c},g),r.a.createElement("button",{className:"previewButton smallButton",onClick:function(){s(i)}},l&&o===i?r.a.createElement(b.a,{icon:"pause"}):r.a.createElement(b.a,{icon:"play"})),a.props.user?r.a.createElement(S,{user:a.props.user,trackId:n,track:t}):null))},a.state={},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.singleTrack())}}]),t}(n.Component),N=a(25),x=a.n(N),C=a(26),O=a.n(C),P=a(19),j=a.n(P),L=a(20),U=a.n(L),B=a(46),T=a.n(B);var D=function(e){return r.a.createElement("button",{tabIndex:e.tabIndex,className:"longButton quickScrollUp",onClick:function(){U()(document.querySelector(".".concat(e.locationClass)))}}," ",e.showText)},W=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).renderLyrics=function(){var t=e.state.lyrics.map(function(e,t){return r.a.createElement("p",{key:t},e," \u266a")});return r.a.createElement("div",{tabIndex:"80",className:"lyricsWrapper wrapper"},r.a.createElement("h3",{className:"lyricsTrackName"},e.props.track),t,r.a.createElement(D,{tabIndex:"81",locationClass:"trackResultWrapper",showText:"Back to search results"}))},e.renderLoading=function(){return r.a.createElement("div",{className:"loadingLyrics wrapper"},r.a.createElement("h3",{tabIndex:"5"},"Please ",r.a.createElement("span",null,"click")," on the song's name to check its lyrics after search results show on the page ",r.a.createElement("span",null,"\u266c")))},e.state={lyrics:[]},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;this.props.artist===e.artist&&this.props.track===e.track||O()({url:"https://proxy.hackeryou.com",dataResponse:"json",paramsSerializer:function(e){return x.a.stringify(e,{arrayFormat:"brackets"})},params:{reqUrl:"".concat(y).concat(this.props.artist,"/").concat(this.props.track),params:{apikey:I},xmlToJSON:!1}}).then(function(e){if(e.data.result.track.name===a.props.track){a.setState({lyrics:e.data.result.track.text.split("\n")});U()(document.querySelector(".lyricsWrapper"),{speed:1500,minDuration:1200})}}).catch(function(e){j.a.fire({title:"Sorry",text:"We do not have the lyrics of the song\ud83d\ude13",background:"#1a3543",confirmButtonText:"Fine",confirmButtonColor:"#7a9aaa"})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"lyricsResultWrapper"},this.state.lyrics.length>0?this.renderLyrics():this.renderLoading())}}]),t}(n.Component);var _=function(){return r.a.createElement("div",{"aira-hidden":"true",className:"rellaxWrapper"},r.a.createElement("div",{"aria-hidden":"true",className:"musicSign musicSign1 rellax","data-rellax-speed":"1"},"\u266b"),r.a.createElement("div",{"aria-hidden":"true",className:"musicSign musicSign2 rellax","data-rellax-speed":"3"},"\u2669"),r.a.createElement("div",{"aria-hidden":"true",className:"musicSign musicSign3 rellax","data-rellax-speed":"3"},"\u266c"),r.a.createElement("div",{"aria-hidden":"true",className:"musicSign musicSign4 rellax","data-rellax-speed":"3"},"\u266a"),r.a.createElement("div",{"aria-hidden":"true",className:"musicSign musicSign5 rellax","data-rellax-speed":"1"},"\u266a"),r.a.createElement("div",{"aria-hidden":"true",className:"musicSign musicSign6 rellax","data-rellax-speed":"2.5"},"\u266b"))},F=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleInputChange=function(t){e.setState({inputPlaceholder:t.target.value})},e.handleInputClick=function(){e.setState({inputPlaceholder:""})},e.handleFormSubmit=function(t){if(t.preventDefault(),""!==e.state.inputPlaceholder&&!1===/^\s*$/.test(e.state.inputPlaceholder)){e.setState({inputString:e.state.inputPlaceholder,inputPlaceholder:""});U()(document.querySelector(".trackResultWrapper"),{speed:2e3,minDuration:1600})}else j.a.fire({title:"Input Error!",text:"Please check your input",background:"#1a3543",confirmButtonText:"Cool",confirmButtonColor:"#7a9aaa"})},e.demoClick=function(t){var a=document.getElementById("audio".concat(t));e.setState({isPlaying:!e.state.isPlaying,previewIndex:t,audio:a},function(){e.state.isPlaying?e.state.audio.play():e.state.audio.pause()}),a.onended=function(t){e.setState({isPlaying:!1})}},e.renderLoadingPage=function(){return r.a.createElement("div",{className:"loadingTracks wrapper"},r.a.createElement("h3",{tabIndex:"4"},"Please ",r.a.createElement("span",null,"type in")," track or artist name to search"," ",r.a.createElement("span",null,"\u266b")))},e.displayTracks=function(){var t=[];return e.state.backMusicData.forEach(function(a,n){t.push(r.a.createElement(w,{key:n,track:a,trackId:a.trackId,i:n,handleClickOnSong:e.handleClickOnSong,demoClick:e.demoClick,isPlaying:e.state.isPlaying,previewIndex:e.state.previewIndex,user:e.props.user}))}),r.a.createElement("div",{className:"tracksWrapper wrapper"},r.a.createElement("h3",{tabIndex:"6"},"Results"),r.a.createElement("div",{className:"tracks"},t),r.a.createElement(D,{tabIndex:"79",locationClass:"nav",showText:"Search another song"}))},e.handleClickOnSong=function(t){e.setState({trackUserChoice:t.target.dataset.track,artistUserChoice:t.target.dataset.artist})},e.state={backMusicData:[],inputPlaceholder:"",inputString:"",trackUserChoice:"",artistUserChoice:"",previewTrackUrl:"",isPlaying:!1,audio:null,previewIndex:null},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){new T.a(".rellax")}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(this.state.inputString!==t.inputString&&O()({method:"GET",url:"https://proxy.hackeryou.com",dataResponse:"json",paramsSerializer:function(e){return x.a.stringify(e,{arrayFormat:"brackets"})},params:{reqUrl:"https://itunes.apple.com/search",params:{term:this.state.inputString,country:"ca",media:"music",limit:"24",lang:"en_us",entity:"musicTrack"},xmlToJSON:!1}}).then(function(e){a.setState({backMusicData:e.data.results})}).catch(function(e){j.a.fire({title:"Sorry",text:"We cannot find your song now\ud83d\ude22",background:"#1a3543",confirmButtonText:"OK",confirmButtonColor:"#7a9aaa"})}),void 0!==t.previewIndex&&this.state.previewIndex!==t.previewIndex){var n=t.previewIndex,r=document.getElementById("audio".concat(n));if(r){r.pause();var i=document.getElementById("audio".concat(this.state.previewIndex));this.setState({audio:i,isPlaying:!0},function(){a.state.isPlaying?a.state.audio.play():a.state.audio.pause()})}}t.inputString&&this.state.inputString!==t.inputString&&this.state.audio&&this.setState({isPlaying:!1})}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"headerWrapper wrapper"},r.a.createElement(_,null),r.a.createElement("h1",{tabIndex:"1"},"Melodies & Words"),r.a.createElement("form",{action:"",onSubmit:this.handleFormSubmit},r.a.createElement("label",{"aria-hidden":"true",tabIndex:"2",htmlFor:"track",className:"visuallyHidden"}),r.a.createElement("input",{"aria-hidden":"true",tabIndex:"3","aria-live":"polite",role:"status",onChange:this.handleInputChange,type:"text",id:"trackInput",value:this.state.inputPlaceholder,placeholder:"type in the track name",onClick:this.handleInputClick}),r.a.createElement("button",{className:"longButton submitSearch"},"Find it")))),r.a.createElement("main",null,r.a.createElement("div",{className:"trackResultWrapper"},this.state.backMusicData.length>0?this.displayTracks():this.renderLoadingPage()),r.a.createElement(W,{track:this.state.trackUserChoice,artist:this.state.artistUserChoice})))}}]),t}(n.Component),R=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).singleSong=function(){var e=a.props,t=e.track,n=e.i,i=e.serialNum,c=e.handleRemove,s=e.demoClick,l=e.isPlaying,o=e.previewIndex,u=t.trackViewUrl,d=t.collectionViewUrl,m=t.artworkUrl100,p=t.collectionCensoredName,h=t.previewUrl,v=t.artistName,g=t.trackName;return r.a.createElement("div",{className:"singleTrack"},r.a.createElement("div",{className:"imgWrapper"},void 0!==u?r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:u,"aira-label":"go to track's Itunes page"},r.a.createElement("img",{src:m,alt:"picture of the album "+p})):r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:d,"aira-label":"go to track's Itunes page"},r.a.createElement("img",{src:m,alt:"picture of the album "+p}))),r.a.createElement("div",{className:"trackInfo"},r.a.createElement("audio",{id:"savedPreview".concat(n),src:h,type:"audio/m4a"}),r.a.createElement("p",null,v),r.a.createElement("p",{className:"trackNameSaved"},g),r.a.createElement("div",{className:"buttonWrapper"},r.a.createElement("button",{className:"previewButton smallButton",onClick:function(){s(n)}},l&&o===n?r.a.createElement(b.a,{icon:"pause"}):r.a.createElement(b.a,{icon:"play"})),r.a.createElement("button",{className:"smallButton",onClick:function(){c(i)}},r.a.createElement(b.a,{icon:"trash-alt"})))))},a.state={},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.singleSong())}}]),t}(n.Component),A=a(47),M=a.n(A),q={particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ebff9f"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.30004250602168653,random:!0,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:8.33451405615796,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!1,distance:250.0354216847388,color:"#ffffff",opacity:.4,width:2},move:{enable:!0,speed:6,direction:"bottom-right",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"window",events:{onhover:{enable:!0,mode:"bubble"},onclick:{enable:!0,mode:"repulse"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:.5}},bubble:{distance:400,size:4,duration:.3,opacity:1,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0},z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).requireLogIn=function(){return j.a.fire({title:"\ud83c\udf90Aah",text:"Please log in to see your song list",background:"#3c1706",confirmButtonText:"Fine",confirmButtonColor:"#d77649"}),r.a.createElement("div",{className:"listWrapper"})},a.demoClick=function(e){var t=document.getElementById("savedPreview".concat(e));a.setState({isPlaying:!a.state.isPlaying,previewIndex:e,audio:t},function(){a.state.isPlaying?a.state.audio.play():a.state.audio.pause()}),t.onended=function(e){a.setState({isPlaying:!1})}},a.handleRemove=function(e){g.database().ref("/".concat(a.state.uid)).child(e).remove()},a.dumpAllSongs=function(){g.database().ref("/".concat(a.state.uid)).remove()},a.getList=function(){g.database().ref("/".concat(a.state.uid)).on("value",function(e){var t=[],n=e.val();for(var r in n)t.push([r,n[r]]);a.setState({songs:[].concat(t)})})},a.displayList=function(){var e=[];return a.state.songs.forEach(function(t,n){e.push(r.a.createElement(R,{track:t[1],key:t[0],i:n,serialNum:t[0],demoClick:a.demoClick,isPlaying:a.state.isPlaying,previewIndex:a.state.previewIndex,handleRemove:a.handleRemove}))}),r.a.createElement("div",{className:"listWrapper wrapper"},r.a.createElement("div",{className:"deleteAll"},r.a.createElement("button",{className:"smallButton",onClick:a.dumpAllSongs},r.a.createElement(b.a,{icon:"dumpster"})),r.a.createElement("p",null,"Delete all songs")),r.a.createElement("div",{className:"savedSongs"},e))},a.state={songs:[],uid:a.props.uid,previewTrackUrl:"",isPlaying:!1,previewIndex:null,audio:null},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getList()}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(this.props.uid!==e.uid&&this.setState({uid:this.props.uid},function(){a.getList()}),void 0!==t.previewIndex&&this.state.previewIndex!==t.previewIndex){var n=t.previewIndex,r=document.getElementById("savedPreview".concat(n));if(r){r.pause();var i=document.getElementById("savedPreview".concat(this.state.previewIndex));this.setState({audio:i,isPlaying:!0},function(){a.state.isPlaying?a.state.audio.play():a.state.audio.pause()})}}}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(M.a,{canvasClassName:"particleCanvas",width:"100vw",height:"100vh",params:q}),this.state.uid?this.displayList():this.requireLogIn())}}]),t}(n.Component);var V=function(){return r.a.createElement("footer",null,r.a.createElement("p",{tabIndex:"82"},"Powered! by"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://affiliate.itunes.apple.com/resources/documentation/itunes-store-web-service-search-api/"},"Itunes API")," ","&"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://apiseeds.com/"},"Apiseeds API")),r.a.createElement("p",{tabIndex:"83"},"\xa9Frankie Wang"))},J=(a(88),new g.auth.GoogleAuthProvider),Y=g.auth();k.b.add(f.g,f.h,f.c,f.d,f.e,f.i,f.f,f.a,f.b);var H=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleLogIn=function(){Y.signInWithPopup(J).then(function(t){var a=t.user;e.setState({user:a})})},e.handleLogOut=function(){Y.signOut().then(function(){e.setState({user:null})})},e.state={user:null},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;Y.onAuthStateChanged(function(t){t&&e.setState({user:t})})}},{key:"render",value:function(){var e=this;return r.a.createElement(m.a,null,r.a.createElement(E,{user:this.state.user,handleLogIn:this.handleLogIn,handleLogOut:this.handleLogOut}),r.a.createElement(p.a,{exact:!0,path:"/",render:function(){return r.a.createElement(F,{user:e.state.user})}}),r.a.createElement(p.a,{path:"/songList",render:function(){return r.a.createElement(z,{uid:e.state.user?e.state.user.uid:null})}}),r.a.createElement(V,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[48,1,2]]]);
//# sourceMappingURL=main.a21c205f.chunk.js.map